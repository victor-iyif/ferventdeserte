## 2016年10月2日

1.在网页采集器上，增加粘贴到剪贴板按钮

2.解决提示【当前节点不是父节点的子节点】，之后报错退出

3.对动态请求，增加手气不错功能，从此动态请求和普通请求一致对待

4. 对动态请求中包含的转义字符进行了处理

5. 多次点击手气不错，可以对多个列表进行检测

6. 设置父节点，直接手气不错

7. 当执行时，没有找到执行器，会发出提示

8. 增加【页面枚举组合】功能，快速组合页面中的多个元素

10.增加作者联系方式和捐赠


## 2016年10月15日

1. 当rootxpath表达式错误时，插入会出错，已经解决

2. 当用户在数据清洗中点击模块时，会提示拖拽

3. 生成器拖入时，会提供默认的列名

4. 即使html格式错误，也能捕获异常，避免软件崩溃



## 2016年10月22日

1. 关闭软件时，有时会弹出两次保存项目

2. 可以使用网页采集器，协助抽取Json信息

3. 输出json时，增加换行符，便于在npp等工具打开，提升了性能

4. 当输出txt,csv时，能正确处理转义字符，并与excel等工具兼容

5. 大幅提升读取文件的稳定性，避免因为异常导致软件崩溃

6. 合并多列时，合并项可以用常量。不一定非要用列名


## 2016年10月24日

1. 增加bug反馈： https://github.com/ferventdesert/Hawk/issues

2. 当网站提示自动重定向次数过多时，取消自动重定向功能

3. 当软件关闭时，会自动关闭嗅探功能，防止代理失效，无法上网

4. 解决退出时，需要两次保存文件的问题

5. 大幅度改善软件稳定性，点击按钮都会及时捕获异常而不会崩溃。

6. 为“从爬虫转换”提供默认的“网页采集器”的名字，多少人在这里卡住了啊。。。

7. excel性能问题，是npoi的通病，算了，不改了



## 2016年10月29日

1. 修改严重bug: 当“写入数据库”和“写入数据表”处在任务流中间位置时，配置错误可能会导致流中断。

2. 当创建工程时，自动创建最近打开的文件

3. 增加超级模式（没有通知机制）

4. 目前还有性能问题，无法对文本做处理


## 2016年11月12日

1. （重大更新）增加代理设置

2.  为请求详情增加中文标签

3. 考虑为软件增加国际化服务

4. 改进严重错误：当设置父节点xpath添加属性时，可能会失败 

5. 所有代码升级到.net 4.5，避免同时还需安装.NET 4.0

## 2016年11月15日

1. 在数据清洗上，对每个模块标注序号，增加可读性

2. 超级模式不完善，当json内部内嵌html时，解析不稳定，已经fix

3. 当遇到iframe结构的网页时，需要开启Chrome的开发者模式，才能成功嗅探字段，原因未知

## 2016年11月24日

1. 子流范围选择支持负数 ok

2. 解决超级模式，无法获取json中的数值和boolean的问题，同时优化超级模式性能

3. 子流生成器，转换器的初始化可能会异常，导致数据清洗无法正常工作，已经fix


## 2017年1月3日

1. https://www.verical.com/ 这样的网站提示超时打不开 （未能解决）

2. 清除算法和数据视图两个按钮 ok

3. 在“保存的任务”功能那里，如果已经加载了的任务关闭了选项卡，再次加载就没有反应了。 （解决）

3. 嗅探时为post请求，但得到的却是get请求，导致识别错误    ，解决

4. www.imax.cn/theatres-gettheatres 自动嗅探找不到    



## 2017年8月14日- 2017年12月23日

## 主要更新
- 增加命令行模式，支持定时任务

## 网页采集器
- 强化“手气不错”交互，可直接选择网页上的不同块
- 修复存在父节点XPath时，再增加新节点出现xpath错误
- 修复提示html抓取失败时，提示url其实是错误
- 直接修改Url点击回车即可刷新网页，并增加web浏览器模式

## 数据清洗
- 优化数据清洗调试ui，表格支持拖拽，拷贝内部文本，去掉调试详情，增加单步调试按钮，大大提升转换速度
- 优化支持上百万大小的excel写操作，之前会有内存问题 

- 支持首字母搜索模块
- 优化任务终止逻辑
- 下载文件模块，若目标路径为文件夹，则自动判断超链接地址，获取文件名 
- 字符串分割，支持同时多个匹配编号和多个输出列 
- 当用户点击刷新或做了操作时，之前的任务如果没有停止，则自动停止并启动新任务
- 因为ironpython默认不支持random, 开发随机数生成器
- 修复dicttf（字典转换的bug）
- 自动去除从html上提取文本上的左右两边的空白符号，简化清洗步骤 
- python转换器增加默认库路径，可导入第三方库

## 其他改进
- 增加自隐错误弹窗，有异常时及时提醒用户
- 优化UI的对齐，布局和文案

## 待改进
- 支持同时在网页采集器输入两个关键字，直接定位
- 修改文档，多给出几个python转换器的例子，末尾不应该有返回值 
- 优化子流程的UI和交互
- 改进提示方式，变成多行形式，甚至做成可下拉的几个菜单
- 增加白板式邀请法则，提升用户使用体验
- 欢迎用户去知乎上回答 如何评价 Hawk 这个项目？，说出你的真实开发感受即可。

## 2018年1月7日

1. 增加sqlite,mysql的数据库连接支持，不一定非要使用文件了（测试不完全）
2. 增加网页采集器源代码的拷贝复制，提升了性能
3. 重要更新：当数据清洗发现有模块出问题无法返回数据时，提醒用户进入调试模式，弹窗可直接修改错误的参数
4. 修复数据清洗不显示最左边模块的问题（对应文档问题3）
5. 修复子流转换无法拖入的问题
6. 增加时间区间生成
7. 2,5,8,10 因为考虑到一些原因没有修复，也未增加多个关键字的xpath搜索，原因可以电话沟通
 
 关闭时，若程序中有任务没有保存，则提示用户对任务进行保存。
 列名不能为数字

# 2018年1月13日
1. 【数据清洗】输入列支持下拉选择
2. 修改【下载文件】判断文件路径的bug
3. 【数据清洗】增加【已加载列表】，可拖拽和删除，大大提升可用性
4. 将【任务管理器】放置到其他位置，修改了删除任务导致系统卡死的bug
 
# 2018年1月21日

1. 修复在已有一个或多个属性下【手气不错】的bug
2. 超级模式下js解析的bug
3. 退出时提示会有哪些任务还没保存，提示保存
4. 强化手气不错功能

# 2018年1月24日

1. 修改子流为子任务，修改文案更利于理解
2. 超级模式下禁用浏览器显示，提升性能
3. 解决新建任务，但与目前已有任务重名的问题

# 2018年1月25日

1. 当拖入模块时，若需要配置则自动弹出配置对话框【超流畅】
2. 调用子任务，选择网页采集器时，下拉菜单不仅支持当前任务，还支持从保存的任务中选择

# 2018年1月28日

1. 优化sqlite的交互，修复插入时的错误
2. 优化采集器UI，支持搜索字符时自动跳转到对应位置并高亮
3. tab页面的title与任务名字同步
4. 将网页采集器,xpath,json,python转换器的工作模式统一为一种
5. 强化采集逻辑，能支持采集InnerText,OuterHtml等
6. 清洗支持模块和任务复制，网页采集器支持xpath复制
7. 数据清洗支持自动刷新
8. 【重大更新】网页采集器one模式支持【手气不错】，搜索字符添加一个关键字，即可检索出和其模式相似的属性

#2018年2月3日

1. 【重大更新】根节点路径和子路径都支持css-selector,但手气不错结果只能输出xpath
2  增加子任务图形化配置的ui(可能有bug)


# 2018年3月3日
1. 枚举模式翻译成中文
2. 所有的列表，全部修改为目前的Datagrid，最大高度予以限制


# 2018年4月12日
1. 解决读取excel出现“未将对象引入实例”问题 ok
2. 增加读取本地url的功能
3. 从数据表读取没有刷新   ok
4. 拖入数据提示异常  ok
5. 可下拉的惰性加载 
6. 任务加载后再次加载会报错
7. 优化读写文件和数据库的交互 ok
8. sqlite加载后自动连接  ok
9. 数据库操作改为下拉 ok
10. 选择文件 ok

爬山虎采集器的优缺点：

优点：
自动识别分页
自动做增量更新，这个有点扯，它内部用的数据库？

缺点：
严格区分了浏览器模式和http模式， 但动态请求只能用浏览器模式，这非常慢
参数生成不够灵活


# Hawk一页纸技巧
## 界面和交互
1. 在【模块管理】页面，左侧是【任务管理】，双击图标即可新建和加载已有任务
点击菜单【文件】可加载，保存任务，任务为xml文件。
右侧是【数据管理】，空白处右键可新建连接，连接名上右键可配置，支持本地文件(xls,txt,json)，数据库(mongodb,sqlite)
数据库需要连接后才能使用，可勾选【自动连接】.
2. 软件右下角对应的是【系统状态视图】，左右侧分别是已加载的任务和数据集。
左键查看，右键配置，空白处右键批量管理。 下面的图标可用于删除，拷贝，保存等功能，把任务或数据集拖到图标上试试！
3. 【网页采集器】用于配置单个网页的抓取规则，【数据清洗】用于打造清洗流程，并调用前者。 复杂任务会创建多个清洗并互相调用。

## 网页采集器
1. 上方输入网址，点击刷新，选择工作模式(List列表页，生成多条数据；One详情页，单条数据, NoTransform是原始内容，不做转换)
2. 网页可在源码模式和浏览器模式下切换，后者仅供参考，不能动态执行js
3. 点击【手气不错】进入全自动模式，在弹出的结果下选择所需数据，可配置其名称和XPath，点击【刷新】更新
4. 也可以手工搜索字符，可快速定位元素和XPath，输入名称后手工添加属性。
5. 点击【提取测试】，可预览检查配置结果。
### 高级功能(右侧配置面板)
1. 右侧【属性配置器】面板，点击【请求详情】，可修改网页编码，代理，cookie和请求方式等
2. 若是动态页面(ajax)，填入搜索字符，点击【自动嗅探】，在弹出的浏览器中翻到对应的关键字，Hawk就能自动捕捉真实请求
3. 超级模式下，Hawk会将源码中的js,html,json都转成html，更通用但性能较差
4. 填写【共享源】，本采集器同步共享源的【请求详情】，避免重复设置cookie代理等。
5. 详情页(One模式)也可以手气不错(Hawk3新功能)，搜索所需字段，不需要添加到属性列表，点击【手气不错】试试！

## 数据清洗
1. 左侧是所有模块列表，分为生成，转换，过滤和执行四种类型，可通过名称和拼音首字母快速检索。顺序组合可构成复杂任务。
右侧是数据预览，可将选中的模块拖入到右侧对应列上。 双击每个列上面的模块对其配置。将鼠标放在字段上可查看使用介绍。
预览时，处理是串行的，数据不会被写入，有缓存，调试所见即所得。 只有在执行模式下才会并行快速执行。
2. 生成器通常位于任务开头，可从文本，文件，数据库读取数据。 
多个生成器结果有四种方式组合：Merge:横向合并，Append:纵向拼接， Cross:笛卡尔集 , Mix:依次交叉，如121212..
3. 一些转换器也有类似网页采集器的工作模式，后者本质上就是个高级的转换器。
4. 下方菜单栏可点击刷新，前后单步，可通过采样量来修改预览的数据量。配置完毕无误后，右侧面板点击【执行】即可。
### 高级功能和提醒
1. 配置输入列可下拉选择，也可手工输入文本。列名不要为纯数字，否则无法正常显示。 
2. 模块是有顺序的！很多问题来自于顺序不对，在单步调试到某步时，拖入的模块会插入到所在位置。
3. Python转换器：最后一行必须是可求值的表达式。例如有两列a,b,转换器输出列为c，表达式为a+b，则c列内容就是a+b。但表达式不能写c=a+b
Python是强类型语言，输入的数据可能是字符串或数字，因此必要时需要做类型转换。
通过填写库路径，可让转换器调用第三方模块。但这一功能支持不好。
4. 大部分模块配置支持方括号表达式，例如[a]代表将a列的值作为动态参数传入，可参考大众点评的教程中页面的处理
5. 一般在List模式的转换器之前拖入【并行】，可大大提升速度，并行线程不要过多，否则会影响性能。
6. 可在任务的各个位置拖入多个执行器(如【写入数据表】)，它保存的是当前状态的数据。
7. 子任务：任务可互相调用，功能非常强大，可用于处理多次跳转，详情页还包含列表的问题，比较复杂，需参考相关文档。

## 一些忠告
Hawk除了做爬虫，还能做数据清洗，甚至批量执行命令，需要你来挖掘。
Hawk对代理的支持不够（免费的就知足吧），避免过度抓取导致屏蔽。
记得经常保存任务，尽量将数据写入到数据库而非表里，否则程序可能崩溃难以挽回。
如果任务出现异常，请截图软件，详细描述，将根目录下的log.dat发给buptzym@qq.com，我会尽快予以解答。
使用问题烦请在GitHub的issue上提问，其他途径可能不会收到回复。
如果你喜欢Hawk，请star该项目，欢迎给作者打赏，你的鼓励是作者改进软件的最大动力。




